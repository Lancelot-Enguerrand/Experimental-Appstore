{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "stash",
      "image": "stashapp/stash:latest",
      "environment": [
          { "key": "STASH_STASH", "value": "/data/" },
          { "key": "STASH_GENERATED", "value": "/generated/" },
          { "key": "STASH_METADATA", "value": "/metadata/" },
          { "key": "STASH_CACHE", "value": "/cache/" },
          { "key": "STASH_PORT", "value": "9999" }
      ],
      "isMain": true,
      "internalPort": 9999,
      "volumes": [
        {
          "hostPath": "/etc/localtime",
          "containerPath": "/etc/localtime",
          "readOnly": true
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/root/.stash"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/data",
          "containerPath": "/data"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/metadata",
          "containerPath": "/metadata"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/cache",
          "containerPath": "/cache"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/blobs",
          "containerPath": "/blobs"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/generated",
          "containerPath": "/generated"
        }
      ],
      "logging": {
        "driver": "json-file",
        "options": {
          "max-file": "10",
          "max-size": "2m"
        }
      }
    }
  ]
}