{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "ironmount",
      "image": "ghcr.io/nicotsx/ironmount:v0.4.0",
      "isMain": true,
      "internalPort": 4096,
      "volumes": [
        {
          "hostPath": "/var/run/docker.sock",
          "containerPath": "/var/run/docker.sock"
        },
        {
          "hostPath": "/run/docker/plugins",
          "containerPath": "/run/docker/plugins"
        },
        {
          "hostPath": "/proc",
          "containerPath": "/host/proc",
          "readOnly": true
        },
        {
          "hostPath": "/var/lib/repositories/",
          "containerPath": "/var/lib/repositories"
        },
        {
          "hostPath": "/var/lib/ironmount/volumes/",
          "containerPath": "/var/lib/ironmount/volumes",
          "bind": {
            "propagation": "rslave"
          }
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/ironmount",
          "containerPath": "/data"
        }
      ],
      "devices": ["/dev/fuse:/dev/fuse"],
      "privileged": true
    }
  ]
}
